!function(e){function t(t){for(var r,l,c=t[0],i=t[1],s=t[2],f=0,d=[];f<c.length;f++)l=c[f],a[l]&&d.push(a[l][0]),a[l]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={1:0};var o=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},l.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/spotify-organizer/";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=i;o.push([382,0]),n()}({110:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(104),o=n(196),l=n(50),c=n(18),i=[["Name","name"],["Owner","owner.display_name"],["Tracks","tracks.total"]];t.default=function(e){var t=e.playlists,n=e.select,s=e.selectAll,u=e.changeSortMode,f=e.filters;return t.length>0?r.createElement("table",{className:"playlists"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"select"},s&&r.createElement("input",{type:"checkbox",onChange:function(e){return s(e.target.checked)}})),r.createElement("th",{className:"image"}),i.map(function(e){var t=e[0],n=e[1];return r.createElement("th",{key:t,className:t.toLocaleLowerCase()},r.createElement("a",{onClick:function(e){return u(c.getNextSortMode(f.order.key===n,f.order.mode),n)}},t)," ",c.getSortIcon(f.order.key===n,f.order.mode))}))),r.createElement("tbody",null,t.map(function(e){return r.createElement("tr",{key:e.id},r.createElement("td",{className:"select"},s?r.createElement("input",{type:"checkbox",checked:e.selected,onChange:function(t){return n(t.target.checked,e.id)}}):r.createElement("input",{type:"radio",name:"playlist",value:e.id,checked:e.selected,onChange:function(){return n(!0,e.id)}})),r.createElement("td",{className:"image"},e.images.length>0?r.createElement("img",{src:e.images.slice().sort(function(e){return e.height})[0].url}):null),r.createElement("td",{className:"name"},r.createElement(a.Link,{to:l.BASE_URL+"users/"+e.owner.id+"/playlists/"+e.id},r.createElement(o.default,{text:e.name,term:f.text}))),r.createElement("td",{className:"owner"},r.createElement(o.default,{text:e.owner.display_name||e.owner.id,term:f.text})),r.createElement("td",{className:"tracks"},e.tracks.total))}))):null}},112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69),a=n(111),o=n(2);t.default=function(e){var t=e.primary,n=e.disabled,l=e.icon,c=e.children,i=e.onClick,s=e.title;return o.createElement("button",{className:a("button",{primary:t,disabled:n}),onClick:function(e){return!n&&i&&i(e)},title:s},l&&o.createElement(r.FontAwesomeIcon,{icon:l,"aria-hidden":"true"}),l&&c&&o.createElement("span",null," "),c)}},113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69),a=n(2),o=n(40);t.getNextSortMode=function(e,t){if(!e)return o.Sort.Desc;switch(t){case o.Sort.Asc:return o.Sort.None;case o.Sort.Desc:return o.Sort.Asc;case o.Sort.None:return o.Sort.Desc}},t.getSortIcon=function(e,t){if(!e)return null;switch(t){case o.Sort.Asc:return a.createElement(r.FontAwesomeIcon,{icon:"sort-amount-up"});case o.Sort.Desc:return a.createElement(r.FontAwesomeIcon,{icon:"sort-amount-down"});default:return null}},t.canModifyPlaylist=function(e,t){return e.collaborative||e.owner.id===t.name}},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseQueryString=function(e,t){void 0===t&&(t=!1);for(var n={},r=0,a=e.split(t?"#":"?")[1].split("&");r<a.length;r++){var o=a[r].split("="),l=o[0],c=o[1];n[decodeURIComponent(l)]=decodeURIComponent(c)}return n}},115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(74);t.compareByKey=function(e,t,n,a){void 0===a&&(a=!0);var o=a?1:-1;return(e=r.get(e,n))<(t=r.get(t,n))?-1*o:e>t?1*o:0}},125:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a=this&&this.__generator||function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),l=n(8),c=n(18);t.default=function e(t,n,i){var s,u,f,d,p,m;return void 0===n&&(n={}),a(this,function(a){switch(a.label){case 0:return void 0===i?[3,1]:(u=i,[3,3]);case 1:return[4,o.select(function(e){return e.user&&e.user.token})];case 2:u=a.sent(),a.label=3;case 3:return s=u,f=new Headers({Authorization:"Bearer "+s}),[4,o.call(fetch,"https://api.spotify.com/v1/"+t,r({headers:f},n))];case 4:return[4,(d=a.sent()).json()];case 5:switch(p=a.sent(),d.status){case 200:case 304:return[3,6];case 401:return[3,7];case 429:return[3,9]}return[3,13];case 6:return[2,p];case 7:return[4,o.put(l.Actions.logout())];case 8:return a.sent(),[3,14];case 9:return m=Number.parseInt(d.headers.get("Retry-After")||"10"),[4,o.put(l.Actions.startTimer(m))];case 10:return a.sent(),[4,o.call(c.sleep,1e3*m)];case 11:return a.sent(),[4,o.call(e,t,n,s)];case 12:return[2,a.sent()];case 13:throw new Error(p.error.message);case 14:return[2]}})}},126:function(e,t,n){"use strict";this&&this.__generator;Object.defineProperty(t,"__esModule",{value:!0});n(23);var r=n(270),a=n(207),o=n(206),l=n(205),c=[r.default,a.default,o.default,l.default];function i(e){return e}t.CANCEL_SAGAS_HMR="CANCEL_SAGAS_HMR";var s={startSagas:function(e){c.map(i).forEach(function(t){return e.run(t)})},cancelSagas:function(e){e.dispatch({type:t.CANCEL_SAGAS_HMR})}};t.default=s},127:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(40);function o(e,t){switch(t.type){case"PLAYLISTS_SORT_MODE_CHANGE":return r({},e,{order:{key:t.meta,mode:t.payload}});case"PLAYLISTS_FILTER_OWNED_CHANGE":return r({},e,{ownedOnly:t.payload});case"PLAYLISTS_FILTER_EMPTY_CHANGE":return r({},e,{hideEmpty:t.payload});case"PLAYLISTS_FILTER_TEXT_CHANGE":return r({},e,{text:t.payload});default:return e}}t.initialState={playlists:{order:{key:"name",mode:a.Sort.None},text:"",ownedOnly:!1,hideEmpty:!1}},t.playlists=o,t.default=function(e,n){switch(void 0===e&&(e=t.initialState),n.type){case"PLAYLISTS_FILTER_OWNED_CHANGE":case"PLAYLISTS_FILTER_EMPTY_CHANGE":case"PLAYLISTS_FILTER_TEXT_CHANGE":case"PLAYLISTS_SORT_MODE_CHANGE":return r({},e,{playlists:o(e.playlists,n)});default:return e}}},128:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),a=n(100),o=n(127),l=n(275),c=n(274),i=n(273),s=n(272),u=n(271),f=a.combineReducers({filters:o.default,modals:l.default,notifications:c.default,playlists:i.default,routing:r.routerReducer,timer:s.default,user:u.default});t.default=f},159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(18);t.default=function(e){var t=e.tracks;return t.length>0?r.createElement("table",{className:"playlists"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Name"),r.createElement("th",null,"Artist"),r.createElement("th",null,"Album"),r.createElement("th",null,"User"),r.createElement("th",null,"Added at"),r.createElement("th",null,"Duration"))),r.createElement("tbody",null,t.map(function(e,t){return r.createElement("tr",{key:e.id+t},r.createElement("td",null,e.name),r.createElement("td",null,e.artists.map(function(e){return e.name}).join(", ")),r.createElement("td",null,e.album.name),r.createElement("td",null,null===(n=e.meta.added_by)?"Spotify":n.display_name||n.id),r.createElement("td",null,new Date(e.meta.added_at).toLocaleDateString()),r.createElement("td",null,new a.Duration(e.duration_ms).toMinutesString()));var n}))):r.createElement("div",null,"No tracks.")}},160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(e){var t=e.progress;return r.createElement("div",{className:"loading"},r.createElement("div",{className:"spinner"},r.createElement("i",{className:"fa fa-spinner fa-spin fa-3x fa-fw"}),r.createElement("span",{className:"sr-only"},"Loading...")),t&&r.createElement("div",{className:"percentage"},Math.floor(t.current/t.total*100),"%"))}},161:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),l=n(14),c=n(48),i=n(31),s=n(8),u=n(160),f=n(159),d=n(18),p={fetchTracks:s.Actions.fetchTracks,replace:i.replace},m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.fetchTracks,n=e.match;t({id:n.params.id,owner:n.params.user})},t.prototype.render=function(){var e=this.props,t=e.match,n=e.playlists.find(function(e){return e.id===t.params.id});if(void 0===n)return o.createElement(u.default,null);if(n.tracks.loaded<n.tracks.total||void 0===n.tracks.items)return o.createElement(u.default,{progress:{current:n.tracks.loaded,total:n.tracks.total}});var r=n.tracks.items,a=r.reduce(function(e,t){return e+t.duration_ms},0);return o.createElement("div",{className:"manager tracks"},o.createElement("div",{className:"header row"},n.images.length>0?o.createElement("img",{src:n.images.reduce(function(e,t){return e.height||0>(t.height||0)?e:t}).url}):null,o.createElement("div",{className:"info"},n.collaborative&&o.createElement("p",null,o.createElement("strong",null,"Collaborative Playlist")),o.createElement("h1",null,n.name),o.createElement("p",null,"TODO: Fetch description",n.description),o.createElement("p",null,"Created by: ",o.createElement("strong",null,n.owner.display_name||n.owner.id))),o.createElement("span",{className:"filler"}),o.createElement("ul",{className:"stats right-menu"},o.createElement("li",null,r.length," Tracks"),o.createElement("li",null,new d.Duration(a).toString()))),o.createElement("hr",null),o.createElement(f.default,{tracks:r}))},t}(o.Component);t.default=c.withRouter(l.connect(function(e){return{playlists:e.playlists}},p)(m))},162:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),l=n(14),c=n(31),i=n(8),s=n(50),u=n(114),f={tokenAquired:i.Actions.tokenAquired,replace:c.replace},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.componentDidMount=function(){if(-1!==location.href.indexOf("#access_token=")){var e=u.parseQueryString(location.href,!0);this.props.tokenAquired(e.access_token,e.state)}},t.prototype.componentDidUpdate=function(){this.props.user&&this.props.replace(s.BASE_URL)},t.prototype.render=function(){return o.createElement("div",{className:"auth"},o.createElement("a",{className:"button primary",href:s.loginLink()},"Log in to Spotify"))},t}(o.Component);t.default=l.connect(function(e){return{user:e.user}},f)(d)},163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(14),o={startTimer:n(8).Actions.startTimer};t.default=a.connect(function(e){return{timer:e.timer}},o)(function(e){var t=e.timer,n=e.startTimer;return r.createElement("ul",{className:"alerts",onClick:function(){return n(10)}},t>0&&r.createElement("li",{className:"alert"},"Spotify API Limit Exceeded. Please wait ",t," seconds"))})},165:function(e,t,n){},18:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(269)),r(n(212)),r(n(211)),r(n(114)),r(n(210)),r(n(113)),r(n(68)),r(n(115)),r(n(209)),r(n(208))},190:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69),a=n(189),o=n(2),l=n(14);t.default=l.connect(function(e){return{notification:e.notifications}})(function(e){var t=e.notification;return o.createElement(a.default,{open:null!==t,message:t?t.progress?o.createElement("span",null,o.createElement(r.FontAwesomeIcon,{icon:"spinner",pulse:!0}),"  ",t.message,"..."):t.message:""})})},191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(e){var t=e.location;return r.createElement("div",null,r.createElement("h1",null,"No match for ",r.createElement("code",null,t.pathname)))}},192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(104),o=n(50);t.default=function(e){var t=e.user;return r.createElement("header",null,r.createElement("nav",null,r.createElement("ul",null,r.createElement("li",null,r.createElement(a.Link,{to:o.BASE_URL},"Home"))),t&&r.createElement("ul",null,r.createElement("li",null,r.createElement("img",{height:20,src:t.image||void 0})," ",t.name))))}},193:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),l=n(14),c=n(8),i={hideEmpty:c.Actions.updateHideEmptyFilter,updateOwned:c.Actions.updateOwnedFilter},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.filters,n=e.hideEmpty,r=e.updateOwned;return o.createElement("ul",{className:"settings"},o.createElement("li",null,o.createElement("input",{type:"checkbox",checked:t.hideEmpty,onChange:function(e){return n(e.target.checked)}})," Hide empty playlists "),o.createElement("li",null,o.createElement("input",{type:"checkbox",checked:t.ownedOnly,onChange:function(e){return r(e.target.checked)}})," Show only own playlists"))},t}(o.Component);t.default=l.connect(function(e){return{filters:e.filters.playlists}},i)(s)},194:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(111),l=n(2),c=n(27),i=n(14),s=n(8),u=n(112),f={registerModal:s.Actions.registerModal,unregisterModal:s.Actions.unregisterModal,changeModal:s.Actions.changeModal},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.componentDidMount=function(){var e=this.props;(0,e.registerModal)(e.id)},t.prototype.componentWillUnmount=function(){var e=this.props;(0,e.unregisterModal)(e.id)},t.prototype.render=function(){var e=this.props,t=e.id,n=e.open,r=e.centered,a=e.disabled,i=e.changeModal,s=e.children,f=e.onConfirm,d=l.cloneElement(this.props.component,{onClick:function(){return!a&&i(!0,t)}});return l.createElement(l.Fragment,null,d,n&&c.createPortal(l.createElement("div",{className:o("modal__overlay",{centered:r}),onClick:function(e){return i(!1,t)}},l.createElement("div",{className:"modal",onClick:function(e){return e.stopPropagation()}},l.createElement("div",{className:"content"},s),f&&l.createElement("div",{className:"modal__buttons"},l.createElement(u.default,{onClick:function(e){return i(!1,t)}},"Cancel"),l.createElement(u.default,{primary:!0,onClick:function(e){f(e),i(!1,t)}},"Confirm")))),document.getElementById("root")))},t}(l.Component);t.default=i.connect(function(e,t){var n=e.modals.find(function(e){return e.id===t.id});return{open:!!n&&n.open}},f)(d)},195:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),c=n(8),i=n(127),s=n(18),u=n(110),f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={aFilters:n.props.filters,bFilters:i.initialState.playlists},n}return a(t,e),t.prototype.updateAFilters=function(e){var t=i.playlists(this.state.aFilters,e);this.setState({aFilters:t})},t.prototype.updateBFilters=function(e){var t=i.playlists(this.state.bFilters,e);this.setState({bFilters:t})},t.prototype.handleRadioClick=function(e){var t=this.props.playlists.find(function(t){return t.id===e});this.setState({playlistToRemoveFrom:t}),this.props.onPlaylistSelect(t)},t.prototype.render=function(){var e=this,t=this.props,n=t.playlists,r=t.select,a=t.selectAll,i=t.user,f=this.state,d=f.aFilters,p=f.bFilters,m=f.playlistToRemoveFrom,h=s.applyPlaylistsFilters(n,d).filter(function(e){return!m||e.id!==m.id}),y=s.applyPlaylistsFilters(n,p).filter(function(e){return(e.collaborative||e.owner.id===i.name)&&!h.filter(function(e){return e.selected}).some(function(t){return t.id===e.id})}).map(function(e){return o({},e,{selected:!!m&&e.id===m.id})});return l.createElement("div",{className:"playlists-compare"},l.createElement(u.default,{playlists:h,filters:d,select:r,selectAll:a,changeSortMode:function(t,n){return e.updateAFilters(c.Actions.updatePlaylistsSort(t,n))}}),l.createElement(u.default,{playlists:y,filters:p,select:function(t,n){return e.handleRadioClick(n)},changeSortMode:function(t,n){return e.updateBFilters(c.Actions.updatePlaylistsSort(t,n))}}))},t}(l.Component);t.default=f},196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(e){var t=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=t.toLowerCase().split(" "),r=new Array(n.length);if(-1===e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase()))return[new a(e,!1)];for(var o=0,l=0,c=0,i=n;c<i.length;c++){var s=i[c];l=e.toLowerCase().indexOf(s,o),r.push(new a(e.substr(o,l-o),!1)),o=l+s.length,r.push(new a(e.substr(l,s.length),!0))}return r.push(new a(e.substr(o,e.length),!1)),r}(e.text,e.term);return r.createElement("span",null,t.map(function(e){return e.highlighted?r.createElement("span",{className:"highlighted",key:e.text},e.text):e.text}))};var a=function(){return function(e,t){void 0===t&&(t=!1),this.text=e,this.highlighted=t}}()},197:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);t.default=function(e){var t=e.label,n=a(e,["label"]);return o.createElement("label",{className:"input "+n.type},o.createElement("input",r({},n)),o.createElement("span",{className:"label"},t))}},198:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),l=n(14),c=n(8),i=n(112),s=n(197),u=n(110),f=n(195),d=n(40),p=n(18),m=n(194),h=n(193),y={selectAll:c.Actions.selectPlaylists,select:c.Actions.selectPlaylist,changeSortMode:c.Actions.updatePlaylistsSort,updateFilterText:c.Actions.updateFilterText,deduplicate:c.Actions.deduplicatePlaylists},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={mode:d.OperationMode.None,compareType:p.CompareType.SongId,secondPlaylist:null},t}return a(t,e),t.prototype.changeMode=function(e){this.setState({mode:e})},t.prototype.handleInputChange=function(e){var t=e.currentTarget;"checkbox"===t.type&&this.setState({mode:t.checked?d.OperationMode.PullTracks:d.OperationMode.Duplicates})},t.prototype.render=function(){var e=this,t=this.props,n=t.filters,r=t.select,a=t.selectAll,l=t.changeSortMode,c=t.updateFilterText,y=t.user,_=t.deduplicate,E=this.state,v=E.mode,b=E.compareType,A=E.secondPlaylist;if(null!==y){var g=p.applyPlaylistsFilters(this.props.playlists,n,y),S=g.filter(function(e){return e.selected}),O=v===d.OperationMode.Duplicates||v===d.OperationMode.PullTracks,P=p.getDeduplicateErrors(v,S,A,y);return o.createElement("div",{className:"manager"},o.createElement("div",{className:"header row"},o.createElement("h1",null,"Playlists"),o.createElement("input",{type:"text",placeholder:" Filter",onChange:function(e){return c(e.target.value)}}),o.createElement("span",{className:"filler"}),o.createElement(m.default,{id:"settings",centered:!0,component:o.createElement(i.default,{icon:"cog"})},o.createElement(h.default,null))),o.createElement("div",{className:"row"},O?o.createElement(o.Fragment,null,o.createElement(i.default,{onClick:function(t){return e.changeMode(d.OperationMode.None)}},"Cancel"),o.createElement(i.default,{primary:!0,disabled:null!==P,title:P||"",onClick:function(e){return O&&_({source:g.filter(function(e){return e.selected}),target:A},b)}},"Confirm")):o.createElement(i.default,{primary:!0,disabled:0===S.length,onClick:function(t){return e.changeMode(d.OperationMode.Duplicates)},title:P||""},"Remove duplicates"),o.createElement("span",{className:"filler"}),o.createElement("ul",{className:"stats right-menu"},o.createElement("li",null,g.length," Playlists"),o.createElement("li",null,g.reduce(function(e,t){return e+t.tracks.total},0)," Tracks"))),O&&o.createElement("div",{className:"row"},o.createElement("form",{className:"horizontal"},o.createElement("div",{className:"row"},o.createElement("strong",null,"Select duplicate criteria"),o.createElement("em",null," (tracks are always compared by song id and artist)")),o.createElement("div",{className:"row"},Object.keys(p.CompareType).filter(function(e){return isNaN(Number(e))}).map(function(t){return o.createElement(s.default,{key:t,name:"comparetype",type:"radio",value:t,checked:b===t,label:t.replace(/([A-Z])/g," $1").trimLeft(),onChange:function(){return e.setState({compareType:t})}})}),o.createElement(s.default,{name:"advanced",type:"checkbox",label:"From another playlist",onChange:function(t){return e.handleInputChange(t)}})))),o.createElement("hr",null),v!==d.OperationMode.PullTracks?o.createElement(u.default,{changeSortMode:l,filters:n,select:r,selectAll:a,playlists:g}):o.createElement(f.default,{user:y,filters:n,select:r,selectAll:a,playlists:g,onPlaylistSelect:function(t){return e.setState({secondPlaylist:t})}}))}},t}(o.Component);t.default=l.connect(function(e){return{playlists:e.playlists,filters:e.filters.playlists,user:e.user}},y)(_)},199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(198);t.default=function(e){return r.createElement("div",null,r.createElement(a.default,null))}},200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(e){return r.createElement("footer",null,r.createElement("span",null,r.createElement("a",{href:"https://github.com/hyldmo/spotify-organizer",target:"_blank"},"Spotify Organizer v","0.4.5")),r.createElement("span",null,r.createElement("a",{href:"https://github.com/hyldmo/spotify-organizer/issues/new",target:"_blank"},"Feedback")))}},201:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),l=n(14),c=n(31),i=n(50),s={replace:c.replace},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t}return a(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({hasError:!0})},t.prototype.render=function(){return this.state.hasError?(location.pathname!==i.BASE_URL&&this.props.replace(i.BASE_URL),null):this.props.children},t}(o.Component);t.default=l.connect(function(e){return{}},s)(u)},204:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(203),o=n(14),l=n(48),c=n(201),i=n(200),s=n(199),u=n(192),f=n(191),d=n(50),p=n(190);n(165);var m=n(163),h=n(162),y=n(161);t.default=a.hot(e)(l.withRouter(o.connect(function(e){return{user:e.user}},{})(function(e){var t=e.user;return r.createElement(r.Fragment,null,r.createElement(u.default,{user:t}),r.createElement(m.default,null),r.createElement("main",null,r.createElement(c.default,null,t?r.createElement(l.Switch,null,r.createElement(l.Route,{exact:!0,path:d.BASE_URL,component:s.default}),r.createElement(l.Route,{exact:!0,path:d.BASE_URL+"users/:user/playlists/:id",component:y.default}),r.createElement(l.Route,{component:f.default})):r.createElement(h.default,null))),r.createElement(i.default,null),r.createElement(p.default,null))})))}).call(this,n(58)(e))},205:function(e,t,n){"use strict";var r=this&&this.__generator||function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),o=n(8),l=n(68);function c(e){var t;return r(this,function(n){switch(n.label){case 0:t=e.payload,n.label=1;case 1:return t>0?[4,a.call(l.sleep,1e3)]:[3,4];case 2:return n.sent(),[4,a.put(o.Actions.updateTimer(--t))];case 3:return n.sent(),[3,1];case 4:return[2]}})}t.default=function(){return r(this,function(e){switch(e.label){case 0:return[4,a.takeLatest(o.Actions.startTimer(0).type,c)];case 1:return e.sent(),[2]}})}},206:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a=this&&this.__generator||function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),l=n(8),c=n(18),i=n(68),s=n(125);function u(){var e,t,n,r;return a(this,function(a){switch(a.label){case 0:e=[],n=50,r=0,a.label=1;case 1:return[4,o.call(s.default,"me/playlists?offset="+r+"&limit="+n)];case 2:t=a.sent(),e=e.concat(t.items),r+=n,a.label=3;case 3:if(null!==t.next)return[3,1];a.label=4;case 4:return[4,o.put(l.Actions.playlistsFetched(e))];case 5:return a.sent(),[2]}})}function f(e){function t(){return a(this,function(e){switch(e.label){case 0:return[4,o.select(function(e){return e.playlists.find(function(e){return e.id===c})})];case 1:return e.sent()?[2]:[4,o.call(i.sleep,50)];case 2:return e.sent(),[4,o.call(t)];case 3:return e.sent(),[2]}})}var n,r,c,u,f,d,p,m,h;return a(this,function(a){switch(a.label){case 0:n=e.payload,r=n.owner,c=n.id,u=[],d=100,p=0,m=0,a.label=1;case 1:return[4,o.call(s.default,"users/"+r+"/playlists/"+c+"/tracks?offset="+p+"&limit="+d)];case 2:return f=a.sent(),h=f.items.map(function(e){return{id:e.track.id,name:e.track.name,artists:e.track.artists.map(function(e){return{id:e.id,name:e.name}}),album:{id:e.track.album.id,name:e.track.album.name},duration_ms:e.track.duration_ms,meta:{added_at:e.added_at,added_by:e.added_by,is_local:e.is_local,index:m++}}}),u=u.concat(h),p+=d,[4,o.put(l.Actions.fetchTracksProgress(u.length,c))];case 3:a.sent(),a.label=4;case 4:if(null!==f.next)return[3,1];a.label=5;case 5:return[4,o.call(t)];case 6:return a.sent(),[4,o.put(l.Actions.tracksFetched(u,c))];case 7:return a.sent(),[2]}})}function d(e){var t,n,i,u,d,p,m,h,y,_,E,v,b,A,g,S;return a(this,function(a){switch(a.label){case 0:return t=e.payload,n=t.source,i=t.target,u=e.meta,[4,o.put(l.Actions.createNotification({message:"Loading tracks",progress:!0}))];case 1:return a.sent(),[4,o.all((i?n.concat(i):n).map(function(e){return o.call(f,l.Actions.fetchTracks({id:e.id,owner:e.owner.id}))}))];case 2:return a.sent(),[4,o.select(function(e){return e.playlists.filter(function(e){return n.map(function(e){return e.id}).includes(e.id)})})];case 3:d=a.sent(),a.label=4;case 4:return a.trys.push([4,20,,22]),null!==i?[3,5]:(p=d.map(function(e){return r({},e,{tracks:c.deduplicate(e.tracks.items,u)})}),[3,7]);case 5:return[4,o.select(function(e){return e.playlists.find(function(e){return e.id===i.id})})];case 6:m=a.sent(),A=d.reduce(function(e,t){return e.concat(t.tracks.items)},[]),p=[r({},m,{tracks:c.pullTracks(A,u,m.tracks.items)})],a.label=7;case 7:return h=p.reduce(function(e,t){return e+t.tracks.length},0),window.confirm("Are you sure? This will remove "+h+" track(s) from "+p.map(function(e){return e.name}).join())?[4,o.put(l.Actions.createNotification({message:"Removing tracks",progress:!0}))]:[3,15];case 8:a.sent(),y=0,_=p,a.label=9;case 9:if(!(y<_.length))return[3,14];E=_[y],v=0,b=c.partition(E.tracks,100),a.label=10;case 10:return v<b.length?(A=b[v],g={tracks:A.map(function(e){return{uri:"spotify:track:"+e.id,positions:null===i?[e.meta.index]:void 0}}),snapshot_id:E.snapshot_id},[4,o.call(s.default,"users/"+E.owner.id+"/playlists/"+E.id+"/tracks",{method:"DELETE",body:JSON.stringify(g)})]):[3,13];case 11:a.sent(),a.label=12;case 12:return v++,[3,10];case 13:return y++,[3,9];case 14:return[3,17];case 15:return[4,o.put(l.Actions.clearNotification())];case 16:return a.sent(),[2];case 17:return[4,o.put(l.Actions.createNotification({message:"Success!"}))];case 18:return a.sent(),[4,o.put(l.Actions.fetchPlaylists())];case 19:return a.sent(),[3,22];case 20:return S=a.sent(),[4,o.put(l.Actions.createNotification({message:S.message}))];case 21:return a.sent(),[3,22];case 22:return[2]}})}t.default=function(){return a(this,function(e){switch(e.label){case 0:return[4,o.takeLatest(l.Actions.fetchPlaylists.type,u)];case 1:return e.sent(),[4,o.takeLatest(l.Actions.fetchTracks.type,f)];case 2:return e.sent(),[4,o.takeLatest(l.Actions.deduplicatePlaylists.type,d)];case 3:return e.sent(),[2]}})}},207:function(e,t,n){"use strict";var r=this&&this.__generator||function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),o=n(8),l=n(18);function c(e){return r(this,function(t){switch(t.label){case 0:return e.payload.progress?[2]:[4,l.sleep(e.payload.duration||2e3)];case 1:return t.sent(),[4,a.put(o.Actions.clearNotification())];case 2:return t.sent(),[2]}})}t.default=function(){return r(this,function(e){switch(e.label){case 0:return[4,a.takeEvery(o.Actions.createNotification.type,c)];case 1:return e.sent(),[2]}})}},208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.urlEscape=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r="",a=0;a<e.length;a++){var o=t[a]||"";r+=e[a]+encodeURIComponent(o)}return r}},209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),a=n(113);t.getDeduplicateErrors=function(e,t,n,o){if(0===t.length)return"You must select a playlist";switch(e){case r.OperationMode.Duplicates:if(t.every(function(e){return a.canModifyPlaylist(e,o)}))return"You do not have permission to edit one or more of the selected playlists.";break;case r.OperationMode.PullTracks:if(null===n)return"You must select a second playlist"}return null}},210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.partition=function(e,t){for(var n=[],r=Math.ceil(e.length/t),a=0;a<r;a++)n.push(e.splice(0,t));return n}},211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(74),a=n(40),o=n(115);t.applyPlaylistsFilters=function(e,t,n){var l=e.slice().filter(function(e){return null!==e.name}).filter(function(e){var n=t.text.toLocaleLowerCase();return r.includes(e.name.toLocaleLowerCase(),n)||r.includes((e.owner.display_name||e.owner.id).toLocaleLowerCase(),n)||e.selected}).filter(function(e){return!n||!t.ownedOnly||e.owner.id===n.name}).filter(function(e){return!t.hideEmpty||e.tracks.total>0});return t.order.mode!==a.Sort.None?l.sort(function(e,n){return o.compareByKey(e,n,t.order.key,t.order.mode===a.Sort.Asc)}):l}},212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){e+=1,this.days=Math.floor(e/864e5),e-=864e5*this.days,this.hours=Math.floor(e/36e5),e-=36e5*this.hours,this.minutes=Math.floor(e/6e4),e-=6e4*this.minutes,this.seconds=Math.floor(e/1e3)}return e.prototype.toString=function(){var e=this;return[[this.days,"day"],[this.hours,"hour"],[this.minutes,"minute"],[this.seconds,"second"]].filter(function(e){return 0!==e[0]}).map(function(t){var n=t[0],r=t[1];return e.formatUnit(n,r)}).join(" ")},e.prototype.toMinutesString=function(){return 24*this.days*60+60*this.hours+this.minutes+":"+this.seconds.toString().padStart(2,"0")},e.prototype.formatUnit=function(e,t){return e>1?e+" "+t+"s":e+" "+t},e}();t.Duration=r},269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(74),o=n(268);!function(e){e.SongId="SongId",e.Name="Name",e.NameAndAlbum="NameAndAlbum",e.NameAndDuration="NameAndDuration"}(r=t.CompareType||(t.CompareType={}));var l=o(function(e){return{id:e.id,name:e.name,artists:e.artists.map(function(e){return e.id}).sort(),album:e.album.name,duration:e.duration_ms}});function c(e,t,n){var o=l(e),c=l(t);if(null===o.id||null===c.id)return!1;if(o.id===c.id)return!0;if(!a.isEqual(o.artists,c.artists))return!1;switch(n){case r.Name:return o.name===c.name;case r.NameAndAlbum:return o.name===c.name&&o.album===c.album;case r.NameAndDuration:return o.name===c.name&&Math.abs(o.duration-c.duration)<1e3;default:return!1}}t.compareTrack=c,t.deduplicate=function(e,t){return void 0===t&&(t=r.SongId),(e=e.slice()).sort(function(e,t){return e.meta.index-t.meta.index}).filter(function(n,r){var a=e.find(function(e){return c(n,e,t)});return void 0!==a&&a.meta.index!==r})},t.pullTracks=function(e,t,n){return void 0===t&&(t=r.SongId),e.filter(function(e){return n.some(function(n){return c(e,n,t)})})}},270:function(e,t,n){"use strict";var r=this&&this.__generator||function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(31),o=n(23),l=n(8),c=n(125);function i(e){var t,n,i,s;return r(this,function(r){switch(r.label){case 0:t=e.payload,n=e.meta,r.label=1;case 1:return r.trys.push([1,7,,8]),[4,o.call(c.default,"me",{},t)];case 2:return i=r.sent(),s={name:i.id,image:i.images?i.images[0].url:null,token:t},[4,o.put(l.Actions.userLoaded(s))];case 3:return r.sent(),localStorage.setItem("token",t),[4,o.put(l.Actions.fetchPlaylists())];case 4:return r.sent(),n?[4,o.put(a.replace(n))]:[3,6];case 5:r.sent(),r.label=6;case 6:return[3,8];case 7:return r.sent(),[3,8];case 8:return[2]}})}function s(e){var t;return r(this,function(e){switch(e.label){case 0:return(t=localStorage.getItem("token"))?[4,o.put(l.Actions.tokenAquired(t,null))]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})}t.default=function(){return r(this,function(e){switch(e.label){case 0:return[4,o.takeLatest(l.Actions.tokenAquired.type,i)];case 1:return e.sent(),[4,o.takeLatest(l.Actions.loadUser.type,s)];case 2:return e.sent(),[2]}})}},271:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(void 0===e&&(e=null),t.type){case"USER_LOADED":return t.payload;case"USER_LOGOUT":return null;default:return e}}},272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(void 0===e&&(e=0),t.type){case"TIMER_START":case"TIMER_UPDATE":return t.payload;default:return e}}},273:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(void 0===e&&(e=[]),t.type){case"FETCH_PLAYLISTS_SUCCESS":return t.payload.map(function(e){return r({},e,{tracks:r({},e.tracks,{loaded:0}),selected:!1})});case"PLAYLISTS_SELECT":case"FETCH_TRACKS_SUCCESS":case"FETCH_TRACKS_PROGRESS":return e.map(function(e){return function(e,t){if(e.id!==t.meta)return e;switch(t.type){case"FETCH_TRACKS_PROGRESS":return r({},e,{tracks:r({},e.tracks,{loaded:t.payload})});case"FETCH_TRACKS_SUCCESS":return r({},e,{tracks:r({},e.tracks,{items:t.payload,loaded:t.payload.length})});case"PLAYLISTS_SELECT":return r({},e,{selected:t.payload});default:return e}}(e,t)});case"PLAYLISTS_SELECT_ALL":return e.map(function(e){return r({},e,{selected:t.payload})});default:return e}}},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(void 0===e&&(e=null),t.type){case"CREATE_NOTIFICATION":return t.payload;case"CLEAR_NOTIFICATION":return null;default:return e}}},275:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(void 0===e&&(e=[]),t.type){case"MODAL_REGISTER":return e.concat([{id:t.payload,open:!1}]);case"MODAL_UNREGISTER":return e.filter(function(e){return e.id!==t.payload});case"MODAL_CHANGE":return e.map(function(e){return function(e,t){if(void 0===t.meta||e.id!==t.meta)return e;switch(t.type){case"MODAL_CHANGE":return r({},e,{open:t.payload});default:return e}}(e,t)});default:return e}}},276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Asc=0]="Asc",e[e.Desc=1]="Desc",e[e.None=2]="None"}(t.Sort||(t.Sort={}))},277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PLAYLIST_READ_PRIVATE="playlist-read-private",e.PLAYLIST_READ_COLLABORATIVE="playlist-read-collaborative",e.PLAYLIST_MODIFY_PUBLIC="playlist-modify-public",e.PLAYLIST_MODIFY_PRIVATE="playlist-modify-private",e.STREAMING="streaming",e.UGC_IMAGE_UPLOAD="ugc-image-upload",e.USER_FOLLOW_MODIFY="user-follow-modify",e.USER_FOLLOW_READ="user-follow-read",e.USER_LIBRARY_READ="user-library-read",e.USER_LIBRARY_MODIFY="user-library-modify",e.USER_READ_PRIVATE="user-read-private",e.USER_READ_BIRTHDATE="user-read-birthdate",e.USER_READ_EMAIL="user-read-email",e.USER_TOP_READ="user-top-read"}(t.Scopes||(t.Scopes={}))},278:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(97),a=n(31),o=n(100),l=n(158),c=n(128),i=n(126),s=!1,u=l.default();t.history=r.default();var f=[u,a.routerMiddleware(t.history)],d=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.compose;t.default=function(t){var r=o.createStore(c.default,t||{},d(o.applyMiddleware.apply(void 0,f)));return i.default.startSagas(u),s&&e.hot&&(e.hot.accept("./reducers",function(){return r.replaceReducer(n(128).default)}),e.hot.accept("./sagas/SagaManager",function(){i.default.cancelSagas(r),n(126).default.startSagas(u)})),r}}).call(this,n(58)(e))},279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51);t.default={tokenAquired:r.createAction("TOKEN_AQUIRED"),loadUser:r.createAction("LOAD_USER"),userLoaded:r.createAction("USER_LOADED"),logout:r.createAction("USER_LOGOUT")}},280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51);t.default={startTimer:r.createAction("TIMER_START"),updateTimer:r.createAction("TIMER_UPDATE")}},281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51);t.default={fetchPlaylists:r.createAction("FETCH_PLAYLISTS"),playlistsFetched:r.createAction("FETCH_PLAYLISTS_SUCCESS"),fetchTracks:r.createAction("FETCH_TRACKS"),fetchTracksProgress:r.createAction("FETCH_TRACKS_PROGRESS"),tracksFetched:r.createAction("FETCH_TRACKS_SUCCESS"),selectPlaylist:r.createAction("PLAYLISTS_SELECT"),selectPlaylists:r.createAction("PLAYLISTS_SELECT_ALL"),updatePlaylistsSort:r.createAction("PLAYLISTS_SORT_MODE_CHANGE"),updateHideEmptyFilter:r.createAction("PLAYLISTS_FILTER_EMPTY_CHANGE"),updateOwnedFilter:r.createAction("PLAYLISTS_FILTER_OWNED_CHANGE"),updateFilterText:r.createAction("PLAYLISTS_FILTER_TEXT_CHANGE"),deduplicatePlaylists:r.createAction("DEDUPLICATE_PLAYLISTS")}},282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51);t.default={createNotification:r.createAction("CREATE_NOTIFICATION"),clearNotification:r.createAction("CLEAR_NOTIFICATION")}},283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51);t.default={registerModal:r.createAction("MODAL_REGISTER"),unregisterModal:r.createAction("MODAL_UNREGISTER"),changeModal:r.createAction("MODAL_CHANGE")}},374:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(373),l=n(2),c=n(14),i=n(31),s=n(289),u=n(8),f=n(278),d=n(204),p=f.default({});p.dispatch(u.Actions.loadUser());var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:null},t}return a(t,e),t.prototype.componentWillReceiveProps=function(){this.setState({error:null})},t.prototype.componentDidCatch=function(e,t){this.setState({error:e})},t.prototype.render=function(){var e=this.state.error;return e?l.createElement(s.default,{error:e}):l.createElement(o.default,null,l.createElement(c.Provider,{store:p},l.createElement(i.ConnectedRouter,{history:f.history},l.createElement(d.default,null))))},t}(l.Component);t.default=m},382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(381),a=n(380),o=n(2),l=n(27),c=n(374);r.default.library.add(a.default),l.render(o.createElement(c.default,null),document.getElementById("root"))},40:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.None=0]="None",e[e.Duplicates=1]="Duplicates",e[e.PullTracks=2]="PullTracks"}(t.OperationMode||(t.OperationMode={})),r(n(277)),r(n(276))},50:function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),o=n(18);t.__DEV__=!1,t.BASE_URL=t.__DEV__?"/":"/spotify-organizer/",t.REDIRECT_URI=t.__DEV__?"http://localhost:1337":"https://hyldmo.github.io"+t.BASE_URL;var l,c=[a.Scopes.PLAYLIST_READ_PRIVATE,a.Scopes.PLAYLIST_MODIFY_PRIVATE,a.Scopes.PLAYLIST_MODIFY_PUBLIC,a.Scopes.USER_LIBRARY_READ,a.Scopes.USER_LIBRARY_MODIFY];t.loginLink=function(){return o.urlEscape(l||(l=r(["https://accounts.spotify.com/authorize?client_id=","&response_type=token&redirect_uri=","&scope=","&state=",""],["https://accounts.spotify.com/authorize?client_id=","&response_type=token&redirect_uri=","&scope=","&state=",""])),"4a3ae815c2a0443c824541a7aa94cfcc",t.REDIRECT_URI,c.join(" "),window.location.pathname)}},51:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=function(e){var t;return(t=function(t,n){return{type:e,payload:t,meta:n}}).type=e,t}},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})}},8:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(283),o=n(282),l=n(281),c=n(280),i=n(279);t.Actions=r({},a.default,o.default,l.default,c.default,i.default)}});
//# sourceMappingURL=main-4dd0c9212b1a8c3f57e8.js.map